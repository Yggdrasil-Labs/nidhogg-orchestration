services:
  valhalla-auth:
    # 开发环境可以挂载日志目录以便调试
    volumes:
      - ./logs/valhalla-auth:/app/logs
    # 开发环境可以暴露更多调试端口
    ports:
      - "${AUTH_HTTP_PORT:-8081}:8081"
      - "${AUTH_SERVICE_PORT:-20880}:20880"
      - "${AUTH_DEBUG_PORT:-5005}:5005"  # Java 远程调试端口
    networks:
      - Yggdrasil-net

  valhalla-user:
    # 开发环境可以挂载日志目录以便调试
    volumes:
      - ./logs/valhalla-user:/app/logs
    # 开发环境可以暴露更多调试端口
    ports:
      - "${USER_HTTP_PORT:-8082}:8081"
      - "${USER_SERVICE_PORT:-20881}:20880"
      - "${USER_DEBUG_PORT:-5006}:5005"  # Java 远程调试端口
    networks:
      - Yggdrasil-net

  valhalla-user-admin:
    # 开发环境前端端口配置（8080 被 nacos 占用，使用 8083）
    ports:
      - "${FRONTEND_PORT:-8083}:80"
    networks:
      - Yggdrasil-net

networks:
  Yggdrasil-net:
    name: Yggdrasil-net

