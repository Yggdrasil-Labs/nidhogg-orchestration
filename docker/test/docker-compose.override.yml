version: '3.8'

services:
  nacos-standalone-derby:
    expose:
      - "9848"
      - "9849"
      - "7848"
    networks:
      - Yggdrasil-net

  valhalla-auth:
    # 测试环境配置
    environment:
      - SPRING_PROFILES_ACTIVE=test
      - JAVA_OPTS=${AUTH_JAVA_OPTS:--Xms128m -Xmx256m -XX:+UseSerialGC -XX:MaxRAM=512m}
    networks:
      - Yggdrasil-net

  valhalla-user:
    # 测试环境配置
    environment:
      - SPRING_PROFILES_ACTIVE=test
      - JAVA_OPTS=${USER_JAVA_OPTS:--Xms128m -Xmx256m -XX:+UseSerialGC -XX:MaxRAM=512m}
    networks:
      - Yggdrasil-net

  valhalla-user-admin:
    # 测试环境前端端口配置
    ports:
      - "${FRONTEND_PORT:-8080}:80"
    networks:
      - Yggdrasil-net

networks:
  Yggdrasil-net:
    name: Yggdrasil-net
